<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informações do colaborador</title>
    <style>
        #loadingScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            display: none;
            border-radius: 8px;
            text-align: center;
        }

        #loadingLogo {
            width: 150px;
            animation: spin 6s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        #loadingText {
            margin-top: 20px;
            color: #ffffff;
            font-size: 18px;
        }

        #loadingFooter {
            margin-top: 10px;
            color: #ffffff;
            font-size: 14px;
        }

        #progressBar {
            width: 80%;
            height: 10px;
            background-color: #ddd;
            border-radius: 5px;
            margin-top: 20px;
            overflow: hidden;
        }

        #progress {
            height: 100%;
            width: 0;
            background-color: #28a745;
            transition: width 0.3s;
        }

        #percentage {
            font-size: 20px;
            color: #ffffff;
            margin-top: 10px;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #e9ecef;
        }

        .container {
            max-width: 800px;
            margin: 30px auto;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        h1 {
            text-align: center;
            color: #343a40;
        }

        .logo {
            display: block;
            margin: 20px auto;
            max-width: 150px;
        }

        label {
            display: block;
            margin-top: 15px;
            font-weight: bold;
            color: #495057;
        }

        input[type="text"], input[type="tel"], input[type="email"], select, textarea {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            box-sizing: border-box;
        }

        textarea {
            height: 100px;
        }

        button {
            display: block;
            width: 100%;
            padding: 12px;
            margin-top: 20px;
            background-color: #007bff;
            border: none;
            color: #ffffff;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #0056b3;
        }

        .cpfCnpjField {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Informações do colaborador</h1>
        <img src="/gramado_verde-640w.webp" alt="Logo" class="logo">

        <form action="#" method="post" onsubmit="return validarFormulario()">
            <label for="nome">Nome Completo:</label>
            <input type="text" id="nome" name="nome" required>

            <label for="tipoUsuario">Tipo de Usuário:</label>
            <select id="tipoUsuario" name="tipoUsuario" required onchange="mostrarCampoCpfCnpj()">
                <option value="" disabled selected>Selecione o tipo de usuário</option>
                <option value="Colaborador">Colaborador</option>
                <option value="Prestador de Serviços">Prestador de Serviços</option>
            </select>

            <div id="cpfField" class="cpfCnpjField">
                <label for="cpf">Digite seu CPF:</label>
                <input type="text" id="cpf" name="cpf" oninput="formatarCpf()" maxlength="14">
            </div>

            <div id="cnpjField" class="cpfCnpjField">
                <label for="cnpj">Digite seu CNPJ:</label>
                <input type="text" id="cnpj" name="cnpj" oninput="formatarCnpj()" maxlength="18">
            </div>

            <label for="rg">Digite seu RG:</label>
            <input type="text" id="rg" name="rg" required oninput="formatarRg()">


            <label for="telefone">Telefone:</label>
            <input type="tel" id="telefone" name="telefone" required>

            <label for="unidade">Unidade de Negócio:</label>
            
            <select id="unidade" name="unidade" required onchange="atualizarSetores()">
                <option value="" disabled selected>Selecione uma unidade</option>
                <option value="Snowland">Snowland</option>
                <option value="Acquamontion">Acquamontion</option>
                <option value="Buona Vitta">Buona Vitta</option>
                <option value="Bella">Bella</option>
                <option value="Escritório">Escritório</option>
            </select>

            <label for="setor">Informe Seu Setor:</label>
            <select id="setor" name="setor" required disabled>
                <option value="" disabled selected>Primeiro informe sua unidade de negócio</option>
            </select>
            <label for="cargo">Cargo:</label>
            <input type="text" id="cargo" name="cargo" required>

            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>

            <label for="observacao">Observação:</label>
            <textarea id="observacao" name="observacao"></textarea>

            <button type="submit" id="submitButton">Gerar Termo</button>
        </form>

        <div id="loadingScreen">
            <img src="/LogoEfeito.png" alt="Logo girando" id="loadingLogo">
            <div id="loadingText">Estamos gerando o termo para você...</div>
            <div id="progressBar">
                <div id="progress"></div>
            </div>
            <div id="percentage">0%</div>
            <div id="loadingFooter">By Gramado Parks</div>
        </div>
    </div>

    <script>
        const setores = {
            "Snowland": [
                "Almoxarifado",
                "Artística",
                "Bilheteria",
                "CAC",
                "Caverna do Yeti",
                "Contabilidade",
                "Diretoria",
                "Engenharia",
                "Escola de Neve",
                "Estação de Esqui",
                "Fini",
                "Fotos",
                "Gestão Operacional",
                "Gerência",
                "Gruta",
                "Hot Café",
                "Ice Bar",
                "Lavanderia",
                "Manutenção",
                "Markenting",
                "Mini Hot",
                "Montanha de Neve",
                "Patinação",
                "Pizzaria",
                "Pub da Montanha",
                "Sala de Vendas",
                "Segurança",
                "Souvenir",
                "Suprimentos",
                "Supply Chain",
                "Tecnologia da Informação",
                "Vip",
                "Winebar"
            ],
            "Acquamontion": [
                "Setor 1",
                "Setor 2"
            ],
            "Buona Vitta": [
                "Setor 1",
                "Setor 2"
            ],
            "Bella": [
                "Setor 1",
                "Setor 2"
            ],
            "Escritório": [
                "Setor 1",
                "Setor 2"
            ]
        };

        function atualizarSetores() {
            const unidadeSelecionada = document.getElementById('unidade').value;
            const setorSelect = document.getElementById('setor');

            setorSelect.innerHTML = '<option value="" disabled selected>Selecione o setor</option>'; // Limpa as opções anteriores

            if (unidadeSelecionada && setores[unidadeSelecionada]) {
                setores[unidadeSelecionada].forEach(setor => {
                    const option = document.createElement('option');
                    option.value = setor;
                    option.textContent = setor;
                    setorSelect.appendChild(option);
                });
                setorSelect.disabled = false; // Habilita o campo de setor
            } else {
                setorSelect.disabled = true; // Desabilita o campo de setor se a unidade não for selecionada
            }
        }

        function mostrarCampoCpfCnpj() {
            const tipoUsuario = document.getElementById('tipoUsuario').value;
            const cpfField = document.getElementById('cpfField');
            const cnpjField = document.getElementById('cnpjField');

            if (tipoUsuario === 'Colaborador') {
                cpfField.style.display = 'block';
                cnpjField.style.display = 'none';
            } else if (tipoUsuario === 'Prestador de Serviços') {
                cpfField.style.display = 'none';
                cnpjField.style.display = 'block';
            } else {
                cpfField.style.display = 'none';
                cnpjField.style.display = 'none';
            }
        }

        function formatarCpf() {
            const cpfInput = document.getElementById('cpf');
            cpfInput.value = cpfInput.value.replace(/\D/g, '').replace(/(\d{3})(\d)/, '$1.$2').replace(/(\d{3})(\d)/, '$1.$2').replace(/(\d{3})(\d{1,2})$/, '$1-$2');
        }

        function formatarCnpj() {
            const cnpjInput = document.getElementById('cnpj');
            cnpjInput.value = cnpjInput.value.replace(/\D/g, '').replace(/^(\d{2})(\d)/, '$1.$2').replace(/^(\d{2})\.(\d{3})(\d)/, '$1.$2.$3').replace(/\.(\d{3})(\d)/, '.$1/$2').replace(/(\d{4})(\d)/, '$1-$2');
        }

        function formatarRg() {
            const rgInput = document.getElementById('rg');
            rgInput.value = rgInput.value.replace(/\D/g, '').replace(/(\d{2})(\d)/, '$1.$2').replace(/(\d{3})(\d)/, '$1.$2').replace(/(\d{3})(\d{1,2})$/, '$1-$2');
        }
        function validarFormulario() {
            
    const nome = document.getElementById('nome').value;
    const rg = document.getElementById('rg').value;
    const cpf = document.getElementById('cpf').value;
    const setor = document.getElementById('setor').value;

    // Exibir tela de carregamento
    mostrarTelaDeCarregamento();

    // Simulando o carregamento
    let progress = 0;
    const progressBar = document.getElementById('progress');
    const percentage = document.getElementById('percentage');
    const interval = setInterval(() => {
        if (progress < 100) {
            progress++;
            progressBar.style.width = progress + '%';
            percentage.textContent = progress + '%';
        } else {
            clearInterval(interval);
            // Enviar formulário se o progresso chegar a 100%
           // alert('Termo gerado com sucesso para ' + nome + ' com RG: ' +rg);
            // Redirecionar para a próxima tela
            window.location.href = 'http://172.16.8.34:3000/formularios'; // Defina a URL desejada aquio
        }
    }, 30); // Altere o valor para ajustar a velocidade da barra de carregamento

    return false; // Evita o envio padrão do formulário
}


        function mostrarTelaDeCarregamento() {
            document.getElementById('loadingScreen').style.display = 'flex';
        }
    </script>
</body>
</html>
